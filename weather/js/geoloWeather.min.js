function getFormattedAddress(o){var e=[["house_number","street_number"],["house","building","public_building"],["road","footway","street","street_name","residential","path","pedestrian","road_reference","road_reference_intl"],["village","hamlet","locality"],["neighbourhood","suburb","city_district"],["city","town"],["county","local_administrative_area","county_code"],["state","province","state_code"],["country","country_name"]],i={};e=e.reverse();var s=1;return e.forEach(function(e,t){t++;for(var n=0;n<e.length;n++){var a=e[n];if(void 0!==o[a]){i[s]=1==t?o[a]:o[a]+", "+i[s-1],s++;break}}}),i}function showPosition(n){$.ajax({url:"https://nominatim.openstreetmap.org/reverse?format=json&lat="+n.coords.latitude+"&lon="+n.coords.longitude,success:function(e){console.log("showPosition",e);var t=getFormattedAddress(e.address);console.log("Formatted:",t),$(".cityVal").val(t[4]),$(".cityVal").next("span").toggle(Boolean($(".cityVal").val())),$(".checkout__final-text").html(t[3]),PlaceName=t[4],$.ajax({type:"Post",url:"https://api.darksky.net/forecast/7872f3201f558ed1217c55b409c43f75/"+n.coords.latitude+","+n.coords.longitude+"?units=us&lang=en",async:!1,beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/j-son;charset=UTF-8")},dataType:"jsonp",beforeSend:function(){console.log(n.coords.latitude)},complete:function(){console.log(n.coords.longitude)},success:function(e){iconn=e.currently.icon,lati=n.coords.latitude,longt=n.coords.longitude,currTemp=e.currently.temperature.toString().replace(",",".").split(".")[0]+"&deg;F / "+Math.round(toCelsius(e.currently.temperature.toString().replace(",",".").split(".")[0]))+"&deg;C",summaryDay=e.daily.summary,getIconsKind();new Date(1e3*parseInt(e.currently.time,10));htmlCurrentWeather();for(var t=0;t<e.daily.data.length;t++)iconn=e.daily.data[t].icon,inumber=t,summary=e.daily.data[t].summary,temper="High: "+e.daily.data[t].temperatureMax.toString().replace(",",".").split(".")[0]+"&deg;F / "+Math.round(toCelsius(e.daily.data[t].temperatureMax.toString().replace(",",".").split(".")[0]))+"&deg;C",mintemper="Low: "+Math.round(e.daily.data[t].temperatureMin)+"&deg;F / "+Math.round(toCelsius(e.daily.data[t].temperatureMin))+"&deg;C",humidty="Humidty: "+toPercent(e.daily.data[t].humidity),windspid="Wind Speed: "+e.daily.data[t].windSpeed+" MPH / "+toKPH(e.daily.data[t].windSpeed)+" KPH",getIconsKind(),dday=new Date(1e3*parseInt(e.daily.data[t].time,10)),ddday=dday.toString().substring(0,15),appendDaysList();getIconsPlay()}})}})}function getIconsPlay(){$(".skycons-element").each(function(){var e,t,n;return t=new Skycons({color:"#FFE066"}),e=$(this).attr("id"),n=$(this).data("skycons"),t.add(e,Skycons[n]),t.play()});var e=new Skycons;e.set("clear-day",Skycons.CLEAR_DAY),e.set("clear-night",Skycons.CLEAR_NIGHT),e.set("partly-cloudy-day",Skycons.PARTLY_CLOUDY_DAY),e.set("partly-cloudy-night",Skycons.PARTLY_CLOUDY_NIGHT),e.set("cloudy",Skycons.CLOUDY),e.set("rain",Skycons.RAIN),e.set("sleet",Skycons.SLEET),e.set("snow",Skycons.SNOW),e.set("wind",Skycons.WIND),e.set("fog",Skycons.FOG),e.play()}function getIconsKind(){"clear-day"==iconn?iconn="CLEAR_DAY":"clear-night"==iconn?iconn="CLEAR_NIGHT":"partly-cloudy-day"==iconn?iconn="PARTLY_CLOUDY_DAY":"partly-cloudy-night"==iconn?iconn="PARTLY_CLOUDY_NIGHT":"cloudy"==iconn?iconn="CLOUDY":"rain"==iconn?iconn="RAIN":"sleet"==iconn?iconn="SLEET":"snow"==iconn?iconn="SNOW":"wind"==iconn?iconn="WIND":"fog"==iconn&&(iconn="FOG")}function appendDaysList(){$(".daysList").append('<div class="col-md-3 col-sm-12">   <div class="card-container manual-flip">   <div class="card">   <div class="front  paint-area">   <div class="cover">   <img src="bgimg/rotating_card_thumb.png"/>   </div>   <div class="user">   <canvas class="skycons-element" height="100%" width="100%" data-skycons="'+iconn+'" id="weatherIcon'+inumber+'"></canvas>   </div>   <div class="content">   <div class="main">   <h3 class="name">'+ddday+'</h3>   <p class="profession">'+summary+'</p>   <h5><i class="fa fa-sun-o fa-fw text-muted"></i>'+temper+'</h5>   </div>   <div class="footer">   <button type="button" class="btn btn-simple" onclick="rotateCard(this)">   <i class="fa fa-mail-forward"></i> More Information   </button>   </div>   </div>   </div> \x3c!-- end front panel --\x3e   <div class="back  paint-area">   <div class="header">   <h5 class="motto">'+ddday+'</h5>   </div>   <div class="content">   <div class="main">   <h4 class="text-center">'+summary+"</h4>   <p>"+mintemper+"</p>   <p>"+humidty+"</p>   <p>"+windspid+'</p>   </div>   </div>   <div class="footer">   <button type="button" class="btn btn-simple" rel="tooltip" title="Flip Card" onclick="rotateCard(this)">   <i class="fa fa-reply"></i> Back   </button>   </div>   </div> \x3c!-- end back panel --\x3e   </div> \x3c!-- end card --\x3e   </div> \x3c!-- end card-container --\x3e   </div>').addClass("animated pulse")}function htmlCurrentWeather(){$(".currentWeather").html('<div class="col-md-12">   <div class="card-container manual-flip">   <div class="card">   <div class="front paint-area">   <div class="cover">   <img src="bgimg/rotating_card_thumb.jpg"/>   </div>   <div class="user">   <canvas class="skycons-element" height="100%" width="100%" data-skycons="'+iconn+'" id="weatherIcon999"></canvas>   </div>   <div class="content">   <div class="main">   <h3>Current Weather</h3>   <h1><i class="fa fa-map-marker fa-fw text-muted"></i> '+PlaceName+'</h1>   <h3 class="name">'+currTemp+'</h3>   <p class="profession">'+summaryDay+"</p>   </div>   </div>   </div> \x3c!-- end front panel --\x3e   </div> \x3c!-- end card --\x3e   </div> \x3c!-- end card-container --\x3e   </div>").addClass("animated pulse")}function getMapPlace(){var e={center:new google.maps.LatLng(lati,longt),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP},i=(new google.maps.InfoWindow,new google.maps.LatLngBounds,new google.maps.Map(document.getElementById("dvMap"),e));navigator.geolocation.getCurrentPosition(function(e){var n=new google.maps.LatLng(lati,longt),a=new google.maps.Marker({position:n,title:"Your Location",draggable:!0,map:i}),o=new google.maps.InfoWindow({content:'<div id="infodiv" style="width: 300px">300px wide infowindow!  if the mouse is not here, will close after 3 seconds</div>'});google.maps.event.addListener(a,"dragend",function(){o.open(i,a),i.setCenter(a.getPosition())}),google.maps.event.addListener(a,"mouseover",function(){o.open(i,a)}),google.maps.event.addListener(a,"mouseout",function(){t=setTimeout(function(){o.close()},3e3)}),google.maps.event.addListener(o,"domready",function(){$("#infodiv").on("mouseenter",function(){clearTimeout(t)}).on("mouseleave",function(){t=setTimeout(function(){o.close()},1e3)})}),i.setCenter(a.getPosition())}),$(window).on("resize",function(){var e=i.getCenter();google.maps.event.trigger(i,"resize"),i.setCenter(e)})}function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):console.log("Geolocation is not supported by this browser.")}function rotateCard(e){var t=$(e).closest(".card-container");console.log(t),t.hasClass("hover")?t.removeClass("hover"):t.addClass("hover")}function toCelsius(e){return 5/9*(e-32)}function toPercent(e){return(100*e).toFixed(0)+"&#37;"}function toKPH(e){return(1.609344*e).toFixed(2)}$(document).ready(function(){getLocation(),$(window).load(function(){getIconsPlay(),setTimeout(function(){$("#preloader").velocity({opacity:.1,translateY:"-80px"},{duration:400,complete:function(){$("#hola").velocity({translateY:"-100%"},{duration:1e3,easing:[.7,0,.3,1],complete:function(){}})}})},1e3)})}),$(".getCurrentCity").on("click",function(){$(".daysList").html(""),getIconsPlay(),getLocation()}),$(".getCity").on("click",function(){$(".daysList").html("");var e=$(".cityVal").val();$.ajax({url:"https://nominatim.openstreetmap.org/search?q="+e+"&format=json",success:function(e){console.log(e);var n=e[0];$.ajax({url:"https://nominatim.openstreetmap.org/reverse?format=json&lat="+n.lat+"&lon="+n.lon,success:function(e){var t=getFormattedAddress(e.address);console.log("Formatted:",t),$(".checkout__final-text").html(t[3]),PlaceName=t[4],$.ajax({type:"Post",url:"https://api.darksky.net/forecast/7872f3201f558ed1217c55b409c43f75/"+n.lat+","+n.lon+"?units=us&lang=en",async:!1,beforeSend:function(e){e&&e.overrideMimeType&&e.overrideMimeType("application/j-son;charset=UTF-8")},dataType:"jsonp",beforeSend:function(){console.log(n.lat)},complete:function(){console.log(n.lon)},success:function(e){lati=n.lat,longt=n.lon,iconn=e.currently.icon,currTemp=e.currently.temperature.toString().replace(",",".").split(".")[0]+"&deg;F / "+Math.round(toCelsius(e.currently.temperature.toString().replace(",",".").split(".")[0]))+"&deg;C",summaryDay=e.daily.summary,getIconsKind();new Date(1e3*parseInt(e.currently.time,10));htmlCurrentWeather();for(var t=0;t<e.daily.data.length;t++)iconn=e.daily.data[t].icon,inumber=t,summary=e.daily.data[t].summary,temper="High: "+e.daily.data[t].temperatureMax.toString().replace(",",".").split(".")[0]+"&deg;F / "+Math.round(toCelsius(e.daily.data[t].temperatureMax.toString().replace(",",".").split(".")[0]))+"&deg;C",mintemper="Low: "+Math.round(e.daily.data[t].temperatureMin)+"&deg;F / "+Math.round(toCelsius(e.daily.data[t].temperatureMin))+"&deg;C",humidty="Humidty: "+toPercent(e.daily.data[t].humidity),windspid="Wind Speed: "+e.daily.data[t].windSpeed+" MPH / "+toKPH(e.daily.data[t].windSpeed)+" KPH",getIconsKind(),dday=new Date(1e3*parseInt(e.daily.data[t].time,10)),ddday=dday.toString().substring(0,15),appendDaysList();getIconsPlay()}})}})}})}),$(".cityVal").keyup(function(e){13==e.keyCode&&$(".getCity").click();var t=$(this);t.next("span").toggle(Boolean(t.val()))}),$("#searchclear").hide($(this).prev(".cityVal").val()),$("#searchclear").on("click",function(){$(this).prev(".cityVal").val("").focus(),$(this).hide()}),[].slice.call(document.querySelectorAll(".checkout")).forEach(function(t){var e=t.querySelector(".checkout__button"),n=t.querySelector(".checkout__cancel");e.addEventListener("click",function(e){e.preventDefault(),classie.add(t,"checkout--active")}),n.addEventListener("click",function(){classie.remove(t,"checkout--active")})}),$().ready(function(){$('[rel="tooltip"]').tooltip()}),function(e){"use strict";function n(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}var a,o,i;function t(e,t){(a(e,t)?i:o)(e,t)}"classList"in document.documentElement?(a=function(e,t){return e.classList.contains(t)},o=function(e,t){e.classList.add(t)},i=function(e,t){e.classList.remove(t)}):(a=function(e,t){return n(t).test(e.className)},o=function(e,t){a(e,t)||(e.className=e.className+" "+t)},i=function(e,t){e.className=e.className.replace(n(t)," ")});var s={hasClass:a,addClass:o,removeClass:i,toggleClass:t,has:a,add:o,remove:i,toggle:t};"function"==typeof define&&define.amd?define(s):e.classie=s}(window),$(".color-tool li a").on("click",function(){var e=$(this).data("color");$("body").css("background",e)});